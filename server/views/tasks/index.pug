extends /layouts/application.pug

block content
  .container
    .row
      .col-md-9
        h2.h2 Tasks
        table.table.table-striped
          thead
            tr
              th Name
              th Description
              th Creator
              th Assigned to
              th Status
          tbody
            each task in tasks
              tr
                td
                  a(href= urlFor('editTask', task.id))= task.name
                td= task.description
                td= task.maker.fullName
                td= task.assignee.fullName
                td= task.TaskStatus.name
        a(href= urlFor('newTask')) Create new task
      .col-md-3
        h3.h3 Filter
        if user
          ul
            li
            - const myTasksQuery = { filter: 'getMyTasks', value: user.id }
              a(href=urlFor('tasks', { query: myTasksQuery })) My tasks
        h5.h5 Assigned to:
        ul
          each assignee in assignees
            li
              - const assigneeTasksQuery = { filter: 'getAssigneeTasks', value: assignee.id }
              a(href=urlFor('tasks', { query: assigneeTasksQuery }))= assignee.fullName
        h5.h5 Statuses:
        ul
          each status in statuses
            li
              - const tasksByStatusQuery = { filter: 'getTasksByStatus', value: status.id }
              a(href=urlFor('tasks', { query: tasksByStatusQuery }))= status.name
        if tags
          h5.h5 Tags:
          ul
            each tag in tags
              li
                - const tasksByTagQuery = { filter: 'getTasksByTag', value: tag.id }
                a(href=urlFor('tasks', { query: tasksByTagQuery }))= tag.name
