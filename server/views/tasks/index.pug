extends /layouts/application.pug

block content
  .container
    h1.h1.mt-4.text-center Tasks
    .mb-2
      a(href= urlFor('newTask')) + add new task

    .jumbotron.p-2
      form.form-inline(action=urlFor('tasks'), method='get')
        .form-group.mr-4
          label.mr-2(for='status') Status
          select(
            id='status'
            class='custom-select'
            name='taskStatusId'
          )
            option
            each taskStatus in taskStatuses
              option(value=taskStatus.id)=taskStatus.name

        .form-group.mr-4
          label.mr-2(for='assignee') Assigned to
          select(
            id='assignee'
            class='custom-select'
            name='assignedToId'
          )
            option
            each assignee in assignees
              option(value=assignee.id)=assignee.fullName

        .form-group.mr-4
          label.mr-2(for='tags') Tags
          select(
            id='tags'
            class='custom-select'
            name='tagId'
          )
            option
            each tag in tags
              option(value=tag.id)=tag.name

        .form-check.mr-4
          input.form-check-input(type='checkbox' id='my-tasks' name='myTasks')
          label.form-check-label(for='my-tasks') Only my tasks

        .form-group.mr-4
          input.btn.btn-primary(type='submit' value='Show')

    if !_.isEmpty(tasks)
      table.table.table-striped
        thead
          tr
            th Name
            th Description
            th Creator
            th Assigned to
            th Status
        tbody
          each task in tasks
            tr
              td
                a(href= urlFor('editTask', task.id))=task.name
              td=task.description
              td=task.maker.fullName
              td=task.assignee.fullName
              td=task.TaskStatus.name
    else
      p There is no tasks.
